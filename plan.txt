1. Банковская система

UI

Пользователь/оператор указывает в системе в параметрах счёта привязку к прибору учёта(SensorId). Система способом ajax выясняет есть ли в смарт контракте уже информация об этом приборе учёта. 
Если нет, то возможно ошибка во вводимом значении. Если есть, в этом случае в смарт контракте есть гарантированная привязка: прибор учёта - банковский счёт.

Со стороны банковской системы работает сервис, который:
1. Мониторит состояние смарт-контракта в части триггеров/критериев/условий для банковской системы.
2. Передаёт информацию о формировании счёта на оплату на банковском счёте абонента в смарт-контракт
3. Передаёт информацию о блокировке средств на банковском счёте абонента для последующей оплаты выставленного счёта за электроэнергию
4. Передаёт информацию о оплате счёта выставленного смарт-контрактом в смарт-контракт

Тригеры смарт-контракта для банковской системы:

1. Наступление периода выставления счётов на оплату 
2. Состояние готовности формирования счёта на оплату(сформирована неизменяемая сумма за неизменяемое кол-во показаний счётчика на определённый момент за определённый период)
(2а. Выставление предварительного счёта на оплату или онлайн превью неоплаченной электроэнергии в текущем периоде в денежном выражении)
3. После блокировки суммы для оплаты по смарт-контракту, ждём опредёнённой синхронизации сети(кол-во подтверждений) по транзакции из п.2.









2. Система энергосбытовой компании

Со стороны энергосбытовой системы работает сервис, который:

1. Передаёт данные о тарифах и тарифных зонах из системы энергосбытовой компании в смарт контракт.
2. Передаёт данные о приборах учёта из системы энергосбытовой компании в смарт контракт.
3. Передаёт показания приборов учёта из системы энергосбытовой компании в смарт контракт.
4. Мониторит состояние смарт-контракта в части триггеров/критериев/условий для энергосбытовой системы.

Тригеры смарт-контракта для энергосбытовой системы:
1. Состояние привязки смарт-контракта к банковскому счёту
2. Состояние формирования счёта на оплату за установленный период
3. Состояние получения счёта на оплату банковской системой
4. Состояние оплаты счёта банковской системой(формирование отчёта?)
(4а. Состояние прихода денег на счёт сбытовой компании)